                                                             VEHASECU


        Description de la dÃ©marche suivie et des travaux
        rÃ©alisÃ©s
5.1 DÃ©marche expÃ©rimentale
5.1.1 Validation par simulation virtuelle
     La dÃ©marche pour valider les observateurs par simulation est illustrÃ©e Ã  la Figure 3 et suit
une approche modulaire centrÃ©e sur la modÃ©lisation du peloton, le contrÃ´le coopÃ©ratif,
lâ€™observation distribuÃ©e et la validation sur plateforme Quanser QCar2/QLabs. Cette approche
vise Ã  garantir la robustesse, la fiabilitÃ© et la reproductibilitÃ© des algorithmes dans des
conditions simulÃ©es proches du rÃ©el :
â€¢     Phase 1 â€“ Mise en place de lâ€™environnement : configuration du cadre virtuel sous Ubuntu
      et dÃ©ploiement du conteneur Quanser Virtual Environment pour connecter QLabs et
      QCar2.
â€¢     Phase 2 â€“ Communication V2V et architecture logicielle : mise en place dâ€™une
      communication inter-vÃ©hicules via UDP et dâ€™une architecture Python modulaire.
â€¢     Phase 3 â€“ ContrÃ´le longitudinal et latÃ©ral : deux boucles de commande ont Ã©tÃ©
      implÃ©mentÃ©es :
          o Longitudinale, pour la rÃ©gulation de la vitesse et de la distance inter-vÃ©hicules ;
          o LatÃ©rale, pour le maintien de la trajectoire ;
          o Ces contrÃ´leurs reposent sur le modÃ¨le coopÃ©ratif (CACC) et sâ€™adaptent aux
              perturbations de communication.
â€¢     Phase 4 â€“ DÃ©veloppement dâ€™un observateur et dâ€™un systÃ¨me de confiance : un
      observateur distribuÃ© a Ã©tÃ© dÃ©veloppÃ© pour estimer les Ã©tats des vÃ©hicules du peloton,
      mÃªme en prÃ©sence de retards ou de pertes dâ€™informations. Un systÃ¨me de confiance (trust
      system) pondÃ¨re la fiabilitÃ© des donnÃ©es reÃ§ues et ajuste dynamiquement la fusion
      dâ€™informations.
â€¢     Phase 5 â€“ Validation sur QLabs/QCar2 : Lâ€™intÃ©gration complÃ¨te du systÃ¨me a Ã©tÃ© rÃ©alisÃ©e
      et testÃ©e en simulation temps rÃ©el sous QLabs. La phase de transfert vers les scÃ©narios
      physiques sur QCar2 rÃ©el est en cours de prÃ©paration, afin de valider
      expÃ©rimentalement la robustesse des algorithmes dans un environnement rÃ©el.




                         Figure 3 : DÃ©marche expÃ©rimentale simulation

5.1.2 PrÃ©paration aux essais en environnement rÃ©el
    Lâ€™objectif principal est de concevoir un capteur embarquÃ© intelligent capable dâ€™estimer des
grandeurs non mesurÃ©es et de dÃ©tecter les perturbations liÃ©es aux cyberattaques ou aux
dÃ©fauts capteurs. Ce capteur, renforcÃ© par des algorithmes dâ€™estimation avancÃ©s, agit comme


    Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025    14
                                                             VEHASECU


un capteur logiciel : il associe les mesures radar aux vÃ©hicules, reconstruit les variables
critiques et distingue les anomalies physiques des attaques malveillantes.
â€¢     Phase 1 â€“ DÃ©finition de lâ€™architecture :
         o Cette premiÃ¨re phase a portÃ© sur lâ€™analyse des besoins fonctionnels et la dÃ©finition
            de lâ€™architecture technique de la carte embarquÃ©e.
         o Elle a permis dâ€™identifier les capteurs nÃ©cessaires, les microcontrÃ´leurs Ã  utiliser,
            ainsi que les protocoles de communication adaptÃ©s (SPI, IÂ²C, UART, Wi-Fi 6).
         o Les travaux de cette phase ont abouti Ã  la conception du schÃ©ma bloc de la carte
            et Ã  la sÃ©lection des composants clÃ©s, prÃ©parant ainsi la conception Ã©lectronique
            dÃ©taillÃ©e.
â€¢     Phase 2 â€“ CAO pour lâ€™Ã©lectronique :
         o Cette Ã©tape a consistÃ© Ã  traduire lâ€™architecture en un design Ã©lectronique complet
            sous KiCad.
         o Elle a inclus la rÃ©alisation des schÃ©mas Ã©lectriques, le routage et le placement des
            composants sur un PCB 4 couches.
         o Un travail approfondi a Ã©tÃ© menÃ© sur lâ€™alimentation, les contraintes dâ€™impÃ©dance, la
            compatibilitÃ© Ã©lectromagnÃ©tique et la gestion des signaux haute frÃ©quence (Wi-Fi,
            GNSS).
â€¢     Phase 3 â€“ Prototypage et programmation embarquÃ©e :
         o Dans cette phase, les premiÃ¨res validations logicielles ont Ã©tÃ© rÃ©alisÃ©es Ã  lâ€™aide de
            kits de dÃ©veloppement avant lâ€™intÃ©gration sur carte rÃ©elle.
         o Le dÃ©veloppement du firmware, sous STM32CubeMX et STM32CubeIDE, a permis
            de configurer les protocoles de communication, dâ€™intÃ©grer un systÃ¨me dâ€™exploitation
            temps rÃ©el (RTOS) et de prÃ©parer le code dâ€™acquisition et de communication inter-
            vÃ©hicules.
â€¢     Phase 4 â€“ Tests et protocoles de validation :
         o La derniÃ¨re phase a concernÃ© la vÃ©rification expÃ©rimentale du prototype Ã  travers
            des tests dâ€™alimentation, de communication et de transfert de donnÃ©es.
         o Des protocoles rigoureux ont permis de contrÃ´ler la stabilitÃ© Ã©lectrique, la continuitÃ©
            des signaux et la fiabilitÃ© des communications UART, IÂ²C, SPI et Wi-Fi.




        Figure 4 : dÃ©marche expÃ©rimentale de dÃ©veloppement de la carte embarquÃ©e



    Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025     15
                                                          VEHASECU


5.2 Travaux & rÃ©sultats de lâ€™opÃ©ration de R&D
     Les travaux prÃ©sentÃ©s dans cette section sâ€™inscrivent directement dans la continuitÃ© de la
thÃ¨se CIFRE menÃ©e entre SEGULA Technologies et le CRAN, consacrÃ©e au dÃ©veloppement
dâ€™algorithmes dâ€™estimation avancÃ©s et de solutions embarquÃ©es pour renforcer la rÃ©silience
des vÃ©hicules autonomes et connectÃ©s. Lâ€™annÃ©e Ã©coulÃ©e a Ã©tÃ© marquÃ©e par la mise en Å“uvre
concrÃ¨te des contributions scientifiques dÃ©finies dans le sujet de thÃ¨se : modÃ©lisation du
peloton, conception dâ€™observateurs robustes aux entrÃ©es inconnues, intÃ©gration de
mÃ©canismes de confiance et prÃ©paration dâ€™une plateforme embarquÃ©e dÃ©diÃ©e.
     Les rÃ©sultats dÃ©taillÃ©s ci-dessous traduisent ainsi la progression du projet, depuis les
fondements mÃ©thodologiques jusquâ€™aux validations en simulation rÃ©aliste et aux premiÃ¨res
Ã©tapes de lâ€™implÃ©mentation matÃ©rielle. Ils constituent une Ã©tape essentielle avant la transition
vers les essais expÃ©rimentaux prÃ©vus sur QCar2 et sur systÃ¨mes rÃ©els.


5.3.15.2.1 Simulations virtuelles
5.3.1.15.2.1.1         Mise en place de lâ€™environnement
        Cette Ã©tape est fondamentale, car lâ€™ensemble des expÃ©riences et validations ultÃ©rieures
doivent Ãªtre rÃ©alisÃ©es dans ce cadre virtuel. Elle constitue ainsi la pierre angulaire du projet et
garantit la cohÃ©rence ainsi que la reproductibilitÃ© des essais. La configuration gÃ©nÃ©rale est
illustrÃ©e Ã  la Figure 5.




         Figure 5 : Configuration de lâ€™environnement virtuel QLabs avec QCar2
    Dans cet environnement virtuel, deux vÃ©hicules ont Ã©tÃ© configurÃ©s : un vÃ©hicule leader
chargÃ© de suivre une trajectoire prÃ©dÃ©finie et un vÃ©hicule follower destinÃ© Ã  reproduire le
comportement coopÃ©ratif du peloton. La trajectoire du leader a Ã©tÃ© dÃ©finie Ã  partir des points
de passage (waypoints). Ces points de passage, visibles Ã  la Figure 6, dÃ©finissent une boucle
fermÃ©e que le vÃ©hicule leader doit parcourir de maniÃ¨re rÃ©pÃ©tÃ©e. En fixant une vitesse dÃ©sirÃ©e
de 0.3 m/s, nous assurons un mouvement fluide et constant qui sert de rÃ©fÃ©rence au vÃ©hicule
suiveur.




 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025         16
                                                              VEHASECU




               Figure 6 : Points de passage sÃ©lectionnÃ©s dans la carte de QLabs.
         Le scÃ©nario inclut le sol, des murs et un passage piÃ©ton, ce qui le rapproche des conditions
    rÃ©elles de circulation.

    5.3.1.25.2.1.2        Mesures disponibles sur QCar2
         Pour concevoir le systÃ¨me de confiance, il est essentiel de dÃ©finir au prÃ©alable les
    mesures et mÃ©tadonnÃ©es disponibles sur le vÃ©hicule autonome connectÃ© QCar2. Ces
    donnÃ©es, qui constituent la base de la dÃ©tection d'anomalies et de l'Ã©valuation de la fiabilitÃ©
    des voisins, proviennent de trois sources principales : les capteurs embarquÃ©s, les modules
    de perception (fusion LiDAR-camÃ©ra) et les Ã©changes de communication V2V. Contrairement
    Ã  de nombreux travaux s'appuyant sur des jeux de donnÃ©es publics comme KITTI ou A2D2,
    ce projet utilise des donnÃ©es directement issues de la plateforme matÃ©rielle QCar2 et de son
    environnement de simulation QLabs, garantissant ainsi une validation en conditions rÃ©alistes.
    Le tableau suivant rÃ©capitule l'ensemble des mesures exploitÃ©es dans le cadre de ce projet.
   CatÃ©gorie             Mesure / MÃ©tadonnÃ©e        Source/MÃ©thode d'obtention      Description / Utilisation
Capteurs EmbarquÃ©s          Position (x,y)&             GPS virtuel QLabs (API           Synchronisation
      (Bruts)                Horodatage                     GPSSync)                 temporelle et recalage
                                                                                          des trajectoires.
                        AccÃ©lÃ©ration & Vitesse         IMU (accÃ©lÃ©romÃ¨tres,         Dynamique instantanÃ©e
                              angulaire                    gyroscopes)                      du vÃ©hicule.
                           Nuage de points 2D            LiDAR (RPLiDAR A2,         DÃ©tection des obstacles
                                                           portÃ©e 12m)                       sur 360Â°.
                            Images RGB / Depth              CamÃ©ras (Intel           Perception visuelle de
                                                    RealSense D435 & CSI 360Â°)           l'environnement.
                           Vitesse des roues &       Codeur moteur & Servo de      EntrÃ©es pour le contrÃ´leur
                          Angle de braquage                  direction                longitudinal et latÃ©ral.
       Variables           Position, Orientation        QLabs (Ã©tat global)         Ã‰tat absolu du vÃ©hicule
   CinÃ©matiques                   (ğœ“)                                                      dans la carte.
    (DÃ©rivÃ©es)
                            Vitesse longitudinale    Codeur moteur + Filtre de      Estimation lissÃ©e de la
                                  (v)                         Kalman                       vitesse.
                               AccÃ©lÃ©ration (a)     DÃ©rivation de ğ‘£ (Kalman) ou    Mesure de l'accÃ©lÃ©ration
                                                             IMU direct                 longitudinale.
                              Distance inter-         Fusion LiDAR-CamÃ©ra          Mesure de distance fiable
                             vÃ©hicules (d)          (pipeline dÃ©crit ci-dessous)       pour le contrÃ´le
                                                                                          coopÃ©ratif.




     Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025          17
                                                           VEHASECU


                         Vitesse relative (ğ›¥ğ‘£)    DÃ©rivation temporelle de ğ‘‘        Taux de variation de
                                                                                  l'Ã©cart avec un vÃ©hicule
                                                                                            voisin.
MÃ©tadonnÃ©es V2V           Ã‰tat des voisins       Messages V2V pÃ©riodiques           Partage d'information
                            (ğ‘, ğ‘£, ğ‘)                                                pour la coopÃ©ration.
                         QualitÃ© de la liaison    Taux de perte de paquets,     Indicateur de fiabilitÃ© de la
                                                           dÃ©lais                      communication.
      Tableau 1 : SynthÃ¨se des mesures et mÃ©tadonnÃ©es disponibles sur le QCar2.
     Les grandeurs critiques que sont la distance inter-vÃ©hicules ğ‘‘ et la vitesse relative ğ›¥ğ‘£
sont obtenues via un pipeline sophistiquÃ© de fusion LiDAR-camÃ©ra, inspirÃ© de (Tim, s. d.)
et rÃ©sumÃ© ci-dessous :
     â€¢   Segmentation d'image : Utilisation de YOLOv8-seg pour extraire les masques des
         objets (vÃ©hicules, piÃ©tons).
     â€¢   Post-traitement : Application d'une Ã©rosion sur les masques pour rÃ©duire les faux
         positifs.
     â€¢   Projection LiDAR : Projection des points du nuage LiDAR dans le plan de l'image
         grÃ¢ce aux matrices de calibration (intrinsÃ¨ques et extrinsÃ¨ques).
     â€¢   Association des donnÃ©es : Les points LiDAR sont associÃ©s aux objets segmentÃ©s,
         crÃ©ant un couplage 2D-3D.
     â€¢   Regroupement spatial : Un algorithme de clustering (DBSCAN) filtre et regroupe
         les points fusionnÃ©s.
     â€¢   Estimation 3D : Une Analyse en Composantes Principales (PCA) permet de
         calculer les boÃ®tes englobantes 3D et d'estimer les positions relatives.
     â€¢   Calcul des grandeurs finales : La distance ğ‘‘ est dÃ©duite de la position relative, et
         vitesse relative est obtenue par dÃ©rivation temporelle de ğ‘‘.




 Figure 7 : Vue LiDAR en plongÃ©e (bird-eye          Figure 8 : Vue camÃ©ra avec dÃ©tection et
    view) : en rouge les points du nuage               fusion : boÃ®tes englobantes 2D/3D
    LiDAR, en vert les objets dÃ©tectÃ©s et               associÃ©es aux vÃ©hicules voisins,
    associÃ©s aux classes sÃ©mantiques.               distances estimÃ©es affichÃ©es en temps
                                                                       rÃ©el.


       Ces rÃ©sultats expÃ©rimentaux illustrent le fonctionnement de la chaÃ®ne de fusion dÃ©crite
ci-dessus. La Figure 7 montre comment les points du nuage LiDAR sont regroupÃ©s et associÃ©s
aux objets dÃ©tectÃ©s visuellement, tandis que la Figure 8 illustre la superposition des boÃ®tes
englobantes sur la vue camÃ©ra avec estimation des distances inter-vÃ©hicules (ğ‘‘2 = 8 m et ğ‘‘2



  Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025           18
                                                          VEHASECU


= 22 m dans cet exemple). Ainsi, les grandeurs d et âˆ†v utilisÃ©es par le contrÃ´leur coopÃ©ratif et
le systÃ¨me de confiance ne proviennent pas seulement de mesures brutes, mais dâ€™une
perception multimodale combinant vision et LiDAR.
       Ces fondations solides sont dÃ©sormais en place pour la suite du projet, qui se
concentrera sur l'implÃ©mentation et la validation des algorithmes avancÃ©s de confiance et de
coopÃ©ration.


5.3.1.35.2.1.3         Communication V2V et modularisation logicielle




                                Figure 9 : V2V communication
       La mise en place du systÃ¨me repose non seulement sur les algorithmes de contrÃ´le et
dâ€™estimation, mais aussi sur une architecture logicielle claire permettant la communication
robuste entre vÃ©hicules virtuels dans QLabs. Chaque vÃ©hicule QCar2 est associÃ© Ã  un module
Â« CommHandler Â», responsable de lâ€™Ã©change dâ€™informations avec ses voisins via UDP. Ã€
chaque pÃ©riode (100 ms), le vÃ©hicule envoie un paquet contenant :
        â€¢   Lâ€™identifiant du vÃ©hicule (ğ‘–ğ‘‘) ;
        â€¢   Sa position (ğ‘¥, ğ‘¦) et son orientation ğœ“ ;
        â€¢   Sa vitesse ğ‘£ et son accÃ©lÃ©ration ğ‘ ;
        â€¢   Un horodatage synchronisÃ© par le serveur GPS virtuel.
       Communication V2V : Chaque message est accusÃ© de rÃ©ception (ACK) afin dâ€™Ã©viter
les pertes silencieuses. Un mÃ©canisme de heartbeat permet en outre de dÃ©tecter la disparition
dâ€™un voisin (ex. dÃ©connexion ou panne simulÃ©e). Ces informations sont directement utilisÃ©es
par les observateurs distribuÃ©s et par le systÃ¨me de confiance.
       Modularisation logicielle : Afin de garantir la lisibilitÃ© et la rÃ©utilisabilitÃ© du code, le
projet a Ã©tÃ© dÃ©coupÃ© en plusieurs modules Python interconnectÃ©s :
        â€¢   md_environment : gestion de lâ€™environnement QLabs (spawn de la route,
            obstacles, vÃ©hicules).
        â€¢   md_vehicle : encapsulation du comportement dâ€™un vÃ©hicule (leader/suiveur), in-
            tÃ©grant contrÃ´leur, observateur et communication.
        â€¢   md_comm_handler : gestion bas niveau de la communication V2V (sockets,
            ACKs, heartbeats).
        â€¢   md_gps_sync : synchronisation temporelle par un serveur GPS virtuel.
        â€¢   md_logging_config : gestion centralisÃ©e des journaux (logger) pour tracer les Ã©tats
            et dÃ©boguer.
        â€¢   md_main : script principal orchestrant la simulation (initialisation, lancement, arrÃªt).
       Cette modularisation a facilitÃ© les tests incrÃ©mentaux : par exemple, il Ã©tait possible de
valider la communication seule avant dâ€™activer les contrÃ´leurs coopÃ©ratifs.
       IntÃ©gration avec QLabs : GrÃ¢ce Ã  cette architecture, chaque QCar2 dans QLabs
fonctionne comme un agent autonome capable de communiquer, estimer et contrÃ´ler.


 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025          19
                                                          VEHASECU


Lâ€™utilisation de threads distincts pour la communication (envoi/rÃ©ception) et pour le contrÃ´le
assure une exÃ©cution parallÃ¨le rÃ©aliste, proche du fonctionnement dâ€™un systÃ¨me embarquÃ©
rÃ©el.
        En somme, la communication V2V et la modularisation logicielle constituent la colonne
vertÃ©brale du projet : elles assurent la cohÃ©rence temporelle des informations, la robustesse
face aux pertes de messages, et la possibilitÃ© de faire Ã©voluer facilement le code vers de
nouveaux scÃ©narios (platooning multi-vÃ©hicules, attaques simulÃ©es, ajout de capteurs).

5.3.1.45.2.1.4        ContrÃ´leurs Longitudinal et LatÃ©ral
     Pour assurer une conduite autonome fluide et sÃ©curisÃ©e dans l'environnement QLabs, le
vÃ©hicule doit Ãªtre pilotÃ© de maniÃ¨re prÃ©cise sur ses deux axes : longitudinal (vitesse, distance)
et latÃ©ral (direction, trajectoire). Ces deux contrÃ´leurs agissent de maniÃ¨re complÃ©mentaire
pour garantir un suivi de trajectoire fiable.
       Le contrÃ´le longitudinal repose sur lâ€™algorithme CACC (Cooperative Adaptive Cruise
Control), permettant de maintenir un espacement sÃ»r et dynamique entre vÃ©hicules en
combinant les mesures locales et les informations transmises par les voisins.




       ContrÃ´le latÃ©ral : Le problÃ¨me du corner-cutting, câ€™est-Ã -dire la tendance des vÃ©hicules
suiveurs Ã  couper les virages a Ã©tÃ© traitÃ©e Ã  lâ€™aide du contrÃ´leur Ã  regard prolongÃ© (Extended
Look-Ahead Controller, ELC) proposÃ© par (Bayuwindra et al., 2020). Lâ€™idÃ©e est de dÃ©finir un
point de poursuite virtuel, notÃ© ğ‘ƒ âˆ—, situÃ© dâ€™une distance ğ‘‘ğ¿ğ´ en avant du vÃ©hicule prÃ©cÃ©dent et
dÃ©calÃ© latÃ©ralement de ğ‘‘ğ‘™ğ‘ğ‘¡ . Le vÃ©hicule suiveur calcule alors son angle de braquage en
fonction de ce point cible plutÃ´t que du simple centre de gravitÃ© du vÃ©hicule prÃ©cÃ©dent.

    Cette approche prÃ©sente deux avantages majeurs :
        â€¢   Elle compense les erreurs latÃ©rales liÃ©es Ã  la gÃ©omÃ©trie du virage ;
        â€¢   Elle maintient la distance inter-vÃ©hicules effective telle que prescrite par la
            politique dâ€™espacement (par ex. constant time-gap), et ce indÃ©pendamment du
            fait que le convoi roule en ligne droite ou en virage.
     Une comparaison expÃ©rimentale met en Ã©vidence lâ€™impact du contrÃ´leur Â« look-ahead Â»
sur le phÃ©nomÃ¨ne de Â« corner-cutting Â». Sans Â« look-ahead Â», le vÃ©hicule suiveur a tendance
Ã  couper le virage et Ã  rÃ©duire son rayon de trajectoire, ce qui conduit Ã  un dÃ©calage par
rapport au leader (Figure 10). En revanche, en utilisant un point de poursuite virtuel avancÃ©,
le suiveur suit une trajectoire plus fidÃ¨le au leader et conserve une distance latÃ©rale correcte
(Figure 11).




 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025       20
                                                          VEHASECU


  Figure 10 : Exemple de corner-cutting           Figure 11 : Correction du corner-cutting
   sans contrÃ´leur Ã  regard prolongÃ©.             grÃ¢ce au contrÃ´leur Ã  regard prolongÃ©.



5.3.25.2.2 DÃ©veloppement des observateur et systÃ¨me de confiance
       Lâ€™observateur joue un rÃ´le central dans la reconstitution des Ã©tats non directement
mesurÃ©s et dans la robustesse face aux donnÃ©es bruitÃ©es ou manquantes. Dans ce projet,
deux niveaux dâ€™observation ont Ã©tÃ© mis en Å“uvre : un observateur local basÃ© sur les mesures
disponibles sur QCar2, et un observateur distribuÃ© exploitant la coopÃ©ration entre vÃ©hicules Ã 
travers le canal V2V. La figure suivante illustre lâ€™architecture Ã  deux couches : les observateurs
locaux fonctionnent au niveau physique, tandis que lâ€™estimation distribuÃ©e sâ€™effectue dans une
couche virtuelle via les Ã©changes V2V.




                       Figure 12 : System Communication protocole

5.3.2.15.2.2.1        Observateur local
    Chaque vÃ©hicule est Ã©quipÃ© dâ€™un observateur local (ğ¿ğ‘‚ğ‘– ) capable dâ€™estimer son propre
Ã©tat ğ‘¥ ğ‘– (t) Ã  partir de ses mesures ğ‘¦ğ‘– (ğ‘¡):




5.3.2.25.2.2.2        Observateur distribuÃ©
      Pour estimer les Ã©tats des autres vÃ©hicules, on introduit lâ€™observateur distribuÃ© (DO).
Chaque vÃ©hicule ğ‘– construit une estimation de lâ€™Ã©tat du vÃ©hicule ğ‘— en sâ€™appuyant sur son
observateur local et les informations de ses voisins ğ‘ğ‘– :


                                                                                                ğ‘—
      Sous des conditions de connectivitÃ© du graphe et de choix appropriÃ© des gains ğ‘¤ğ‘–ğ‘™ ,
lâ€™estimation distribuÃ©e converge vers lâ€™Ã©tat rÃ©el du systÃ¨me (Nguyen et al., 2025) :




 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025        21
                                                         VEHASECU




      Figure 13 : Comparaison entre lâ€™Ã©tat estimÃ© et le GPS pour le vÃ©hicule 0.




      Figure 14 : Comparaison entre lâ€™Ã©tat estimÃ© et le GPS pour le vÃ©hicule 1.




      Figure 15 : Comparaison entre lâ€™Ã©tat estimÃ© et le GPS pour le vÃ©hicule 2.




Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025   22
                                                          VEHASECU


      Les Figure 13 Ã  Figure 15 montrent la bonne concordance entre les estimations locales
(courbes bleues) et les mesures GPS (points rouges). On observe que les trajectoires (x, y)
suivent fidÃ¨lement la vÃ©ritÃ© terrain, et que la vitesse longitudinale est correctement reconstruite
malgrÃ© le bruit du codeur moteur.
     Chaque sous-figure reprÃ©sente une variable dâ€™Ã©tat diffÃ©rente :
        â€¢   En haut Ã  gauche : la position x en mÃ¨tre (axe vertical) en fonction du temps t en
            seconde (axe horizontal) ;
        â€¢   En haut Ã  droite : la position y en mÃ¨tre (axe vertical) en fonction du temps t ;
        â€¢   En bas Ã  gauche : lâ€™angle de cap (heading) en degrÃ© (axe vertical) en fonction du
            temps t ;
        â€¢   En bas Ã  droite : la vitesse longitudinale v en m/s (axe vertical) en fonction du
            temps t.
        Ces courbes permettent de vÃ©rifier simultanÃ©ment la prÃ©cision spatiale et cinÃ©matique
de lâ€™observateur. Dans lâ€™ensemble, ces rÃ©sultats confirment que lâ€™observateur local est
suffisamment prÃ©cis pour alimenter le contrÃ´leur longitudinal et servir de base Ã  lâ€™observateur
distribuÃ©.




         Figure 16 : Estimation distribuÃ©e des Ã©tats de la flotte par le vÃ©hicule 0.




         Figure 17 : Estimation distribuÃ©e des Ã©tats de la flotte par le vÃ©hicule 1.




 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025         23
                                                          VEHASECU




        Figure 18 : Estimation distribuÃ©e des Ã©tats de la flotte par le vÃ©hicule 2.


        Les figures prÃ©cÃ©dentes illustrent la capacitÃ© de chaque vÃ©hicule Ã  reconstruire
lâ€™Ã©tat global du convoi Ã  partir des Ã©changes V2V. Chaque figure comporte deux sous-
parties :
        â€¢   Ã€ gauche : les trajectoires (ğ‘¥, ğ‘¦) de la flotte dans le plan (position x en
            abscisse, position y en ordonnÃ©e, toutes deux en mÃ¨tre) ;
        â€¢   Ã€ droite : les vitesses longitudinales ğ‘£ (en m/s, axe vertical) de chaque vÃ©hicule
            en fonction du temps t (en secondes, axe horizontal).
        On constate que les trajectoires estimÃ©es par chaque observateur convergent bien vers
des courbes proches, mÃªme si elles prÃ©sentent de lÃ©gers dÃ©calages dus aux dÃ©lais de
communication et Ã  lâ€™imprÃ©cision des capteurs locaux. De plus, les vitesses reconstruites par
chaque observateur reproduisent correctement la dynamique relative des vÃ©hicules.
        Il est important de souligner que ces rÃ©sultats correspondent au cas nominal sans
attaque, et servent donc de rÃ©fÃ©rence pour les scÃ©narios futurs avec fautes ou perturbations.
Chaque observateur distribuÃ© est capable dâ€™estimer lâ€™ensemble des vÃ©hicules du convoi, et
pas seulement son propre Ã©tat.
        Ces rÃ©sultats mettent en Ã©vidence que, mÃªme sans mÃ©canisme complet de confiance,
lâ€™observateur distribuÃ© fournit une estimation robuste et cohÃ©rente de la flotte entiÃ¨re, et
constitue une base solide pour lâ€™intÃ©gration du systÃ¨me de confiance.
        En pratique, lâ€™observateur local est alimentÃ© par les mesures du QCar2 (position
simulÃ©e, vitesse par encodeur, IMU). Lâ€™observateur distribuÃ© combine ces informations avec
les messages V2V reÃ§us. Ainsi, mÃªme en cas de bruit de capteur ou de communication
dÃ©faillante, chaque vÃ©hicule conserve une estimation robuste de lâ€™Ã©tat du convoi.

5.3.2.35.2.2.3        IntÃ©gration dâ€™un systÃ¨me de confiance (Trust framework)
    Ã€ partir des mesures locales et des donnÃ©es Ã©changÃ©es via la communication V2V, un
cadre de confiance est intÃ©grÃ© dans lâ€™observateur distribuÃ©. Lâ€™objectif est dâ€™Ã©valuer la fiabilitÃ©
de chaque vÃ©hicule voisin en fonction de sa cohÃ©rence cinÃ©matique et de la qualitÃ© de ses
estimations distribuÃ©es :
    â€¢   Fonctions dâ€™Ã©valuation :
           o evaluate_velocity() : VÃ©rifie la cohÃ©rence entre la vitesse annoncÃ©e et le
              dÃ©placement observÃ©.
           o evaluate_distance() : Compare la position rapportÃ©e avec la mesure de
              distance issue du capteur local.



 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025        24
                                                           VEHASECU


            o   evaluate_acceleration() : Ã‰value si les variations de vitesse sont
                dynamiquement plausibles.
            o gamma_cross() : Mesure la cohÃ©rence entre les estimations globales fournies
                par un vÃ©hicule et les donnÃ©es rÃ©elles observÃ©es.
            o gamma_local() : VÃ©rifie si les estimations locales des voisins correspondent Ã 
                la perception du vÃ©hicule propre.
   â€¢     Confiance locale :
            o La confiance locale est basÃ©e sur les messages directs Ã©changÃ©s entre
                vÃ©hicules. Elle combine la vÃ©rification de la vitesse, de la distance et de
                lâ€™accÃ©lÃ©ration pour Ã©valuer si un vÃ©hicule est honnÃªte Ã  propos de son propre
                Ã©tat : ğ¿ğ‘‡ = (ğ‘£ğ‘–ğ‘¡ğ‘’ğ‘ ğ‘ ğ‘’ Ã— ğ‘‘ğ‘–ğ‘ ğ‘¡ğ‘ğ‘›ğ‘ğ‘’ Ã— ğ‘ğ‘ğ‘Ã©ğ‘™Ã©ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘›)
   â€¢     Confiance globale :
            o La confiance globale est basÃ©e sur les estimations distribuÃ©es de la flotte. Elle
                mesure la fiabilitÃ© des informations quâ€™un vÃ©hicule partage sur lâ€™ensemble des
                autres vÃ©hicules : ğ·ğ‘‡ = ğ›¾ğ‘ğ‘Ÿğ‘œğ‘ ğ‘  Ã— ğ›¾ğ‘™ğ‘œğ‘ğ‘ğ‘™
   â€¢     Confiance combinÃ©e finale :
            o La confiance finale combine les aspects local et global afin dâ€™obtenir une
                mesure complÃ¨te de la fiabilitÃ© dâ€™un vÃ©hicule. Un vÃ©hicule doit Ãªtre honnÃªte
                localement et cohÃ©rent globalement pour obtenir un score Ã©levÃ©âˆ¶ ğ‘‚ğ‘— =
                 ğ·ğ‘‡ Ã— ğ¿ğ‘‡
   â€¢     Mise Ã  jour du voisinage de confiance
        o AprÃ¨s calcul du score de confiance, on dÃ©finit un nouvel ensemble de voisins
           fiables : ğ‘ğ‘–(ğ‘¡) = { ğ‘— âˆˆ ğ‘ğ‘– âˆ¶ ğ‘‚ğ‘— > 0.5 }. Seuls les vÃ©hicules dont la confiance
           dÃ©passe 0.5 sont retenus pour le consensus ou la fusion de donnÃ©es.
   â€¢     Poids associÃ©s aux voisins fiables
            o Les poids de communication sont ajustÃ©s dynamiquement selon le nombre de
                voisins fiables :




                  ğº(ğ‘—)                 ğº(ğ‘—)
            avec ğ‘›ğ‘¤ğ‘– (ğ‘¡) = max { ğœ…, |ğ‘ğ‘–       (ğ‘¡)| + 1 } â‰¥ 1, pour tout ğ‘– âˆˆ ğ¿.

       Cette formulation garantit un poids normalisÃ© mÃªme lorsque peu de voisins sont fiables,
       et une limite infÃ©rieure ğœ… pour Ã©viter la perte totale de connectivitÃ©.




Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025      25
                                                          VEHASECU




 Figure 19 : Carte thermique des scores              Figure 20 : Ã‰volution du score de
dâ€™impact normalisÃ©s pour lâ€™ensemble des            confiance durant lâ€™attaque DoS (cas 6)
  vÃ©hicules et des scÃ©narios dâ€™attaque.


     Le tableau ci-dessous rÃ©capitule les diffÃ©rents scÃ©narios dâ€™attaque, oÃ¹ le vÃ©hicule leader
(ID 1) agit comme attaquant entre t = 5 s et 10 s, en ciblant les autres vÃ©hicules de la flotte
avec des perturbations de type dÃ©faut, bias ou perte sur les variables de vitesse et de position.
           NÂ° cas         MÃ©thode attaque           ParamÃ¨tre(s)             Cible
                                                                             (data_type)
              1                 Biais                   -5 m                 Position

             2             DÃ©faut alÃ©atoire         intensitÃ© = 10,            Position
                                                        p = 0.3
             3                   Biais                  -2 m/s                 Vitesse
             4             DÃ©faut alÃ©atoire         intensitÃ© = 2.5,           Vitesse
                                                        p = 0.3
             5             DÃ©faut alÃ©atoire         intensitÃ© = 1.0,           AccÃ©lÃ©ration
                                                        p = 0.3
             6            Perte de donnÃ©es           p_drop = 0.5              Position
                             (Drop DoS)                                        Vitesse
                                                                               AccÃ©lÃ©ration
                        Tableau 2 : Tableau des scÃ©narios d'attaque
     La Figure 19 prÃ©sente une carte thermique des scores dâ€™impact normalisÃ©s pour
chaque vÃ©hicule et pour lâ€™ensemble des six scÃ©narios dâ€™attaque. Le score dâ€™impact
normalisÃ© est obtenu en divisant lâ€™erreur combinÃ©e brute par lâ€™erreur maximale observÃ©e
tous scÃ©narios confondus, ce qui permet de comparer clairement la sÃ©vÃ©ritÃ© relative des
attaques.
     Deux indicateurs ont Ã©tÃ© analysÃ©s pour quantifier les effets des cyberattaques :
â€“ lâ€™erreur combinÃ©e brute, reflÃ©tant la dÃ©viation directe sur la distance, la vitesse et
lâ€™accÃ©lÃ©ration estimÃ©es ;
â€“ le score dâ€™impact normalisÃ©, qui indique la dÃ©gradation du systÃ¨me par rapport aux
performances nominales.
     Parmi lâ€™ensemble des scÃ©narios, lâ€™attaque DoS (Cas 6) prÃ©sente le score dâ€™impact
normalisÃ© le plus Ã©levÃ© (0,872), confirmant quâ€™il sâ€™agit de lâ€™attaque la plus sÃ©vÃ¨re,


 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025         26
                                                          VEHASECU


entraÃ®nant une forte dÃ©gradation de lâ€™estimation et du contrÃ´le sur la pÃ©riode dâ€™attaque. Ã€
lâ€™inverse, lâ€™attaque par biais sur la vitesse (Cas 3, biais = -2 m/s) entraÃ®ne le score dâ€™impact
le plus faible (0,240), ce qui indique un effet limitÃ© sur la stabilitÃ© gÃ©nÃ©rale du peloton.
      Concernant la sensibilitÃ© des vÃ©hicules, le vÃ©hicule V4 apparaÃ®t comme le plus affectÃ©
par les attaques, atteignant le score dâ€™impact maximal (0,872). Ã€ lâ€™opposÃ©, le vÃ©hicule V2
est le plus rÃ©silient, avec le score moyen le plus faible (0,362). Ces observations suggÃ¨rent
que la dynamique locale ou les dÃ©pendances de communication de V4 le rendent plus
vulnÃ©rable aux perturbations, tandis que V2 conserve des performances plus stables.
      De maniÃ¨re gÃ©nÃ©rale, les scores dâ€™impact moyens relativement faibles confirment
lâ€™efficacitÃ© de lâ€™observateur distribuÃ© enrichi par le mÃ©canisme de confiance : celui-ci
attÃ©nue efficacement diffÃ©rents types dâ€™attaques et maintient une estimation prÃ©cise des
Ã©tats du peloton.

    La Figure 20 illustre lâ€™Ã©volution du score de confiance pour lâ€™attaque DoS (Cas 6).
Durant lâ€™intervalle 10-15 s, les vÃ©hicules V2, V3 et V4 prÃ©sentent une chute notable du
score de confiance sous le seuil de 0.5, rÃ©vÃ©lant la dÃ©tection correcte de la perturbation.
Une fois lâ€™attaque terminÃ©e, les scores remontent progressivement, confirmant la capacitÃ©
du systÃ¨me de confiance Ã  identifier les donnÃ©es malveillantes, Ã  les isoler, puis Ã 
restaurer une coopÃ©ration normale.

5.3.35.2.3 PrÃ©paration aux essais en environnement rÃ©el
    La dÃ©finition de lâ€™architecture de la carte est visible ci-dessous :




                     Figure 21 : SchÃ©ma bloc de la carte Ã©lectronique.
     Les phases suivantes de CAO ont permis de dÃ©finir les routages ainsi quâ€™un modÃ¨le final
de la carte.




 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025      27
                                                           VEHASECU




Figure 22 : Image sous KiCad du routage            Figure 23 : Image sous KiCad du modÃ¨le
      final de la carte embarquÃ©e.                     3D final de la carte embarquÃ©e.


       Le projet implique Ã©galement la rÃ©alisation dâ€™une programmation partielle ou complÃ¨te
 de la carte embarquÃ©e, dans le but de valider le bon fonctionnement du matÃ©riel. Nous avons
 dÃ©cidÃ© dâ€™utiliser, dans un premier temps, des modules de dÃ©veloppement afin de prÃ©parer un
 code fonctionnel en amont. Ces modules ont Ã©tÃ© exploitÃ©s sur plaquette de test afin de valider
 les fonctionnalitÃ©s et dâ€™anticiper les Ã©ventuelles contraintes dâ€™implÃ©mentation.




       Figure 24 : Photographie du montage expÃ©rimental rÃ©alisÃ© Ã  lâ€™aide du kit de
                                    dÃ©veloppement.




                            Figure 25 : Image de la carte fabriquÃ©e
 Nous allons utiliser 3 types de protocoles de communications filaire durant ce projet qui sont
 SPI, IÂ²C et UART. Lâ€™utilisation de ces diffÃ©rents protocoles de communication contribue Ã 
 atteindre lâ€™objectif principal de la carte, qui est de servir dâ€™observateur pour le vÃ©hicule. Elle
 permettra ainsi de dÃ©tecter dâ€™Ã©ventuelles dÃ©faillances et de prÃ©venir les risques liÃ©s aux



  Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025        28
                                                          VEHASECU


cyberattaques dÃ©veloppÃ© au cours de ce projet. Le code embarquÃ© doit permettre de rÃ©aliser
les fonctions suivantes :
   â€¢   RÃ©colter les informations sur lâ€™environnement Ã  lâ€™aide des capteurs embarquÃ©s.
   â€¢   Structurer ces donnÃ©es dans une liste dynamique adaptÃ©e au traitement en temps rÃ©el.
   â€¢   Communiquer avec les vÃ©hicules voisins afin dâ€™Ã©changer les donnÃ©es
       environnementales.
   â€¢   Fusionner les informations reÃ§ues avec celles mesurÃ©es localement pour obtenir une
       vision cohÃ©rente.
   â€¢   Transmettre les donnÃ©es consolidÃ©es au systÃ¨me du vÃ©hicule pour une prise de
       dÃ©cision.
Les premiers tests du firmware ont permis de valider :
       â€¢   La lecture et la transmission des donnÃ©es capteurs via UART ;
       â€¢   Le fonctionnement stable du scheduler RTOS Ã  100 Hz ;
       â€¢   Une gestion correcte des interruptions et des tÃ¢ches asynchrones ;
       â€¢   Une compatibilitÃ© complÃ¨te entre les pÃ©riphÃ©riques configurÃ©s et le matÃ©riel cible.

5.45.3         Bilan des travaux
5.4.15.3.1 Simulations virtuelles
     Au cours de cette phase, lâ€™algorithme initial a Ã©tÃ© portÃ© de MATLAB vers Python puis
entiÃ¨rement adaptÃ© Ã  lâ€™Ã©cosystÃ¨me QLabs. Une architecture logicielle modulaire a Ã©tÃ©
dÃ©veloppÃ©e, sÃ©parant clairement lâ€™environnement, le vÃ©hicule, la communication, la
synchronisation GPS et la journalisation, ce qui a facilitÃ© les tests incrÃ©mentaux et la
rÃ©utilisation du code. La communication V2V a Ã©tÃ© rendue robuste grÃ¢ce Ã  lâ€™usage dâ€™UDP avec
accusÃ©s de rÃ©ception, Â« heartbeat Â» et horodatage, assurant la cohÃ©rence temporelle des
Ã©changes. CÃ´tÃ© commande, le suivi longitudinal sâ€™appuie sur CACC tandis que le suivi latÃ©ral
intÃ¨gre un contrÃ´leur ELC afin de limiter le Â« corner-cutting Â» en virage. Enfin, la chaÃ®ne
dâ€™observation comprend un observateur local pour le filtrage et la reconstruction des Ã©tats et
un observateur distribuÃ© pour la reconstruction de la flotte via V2V, tandis que la perception
multimodale LiDAR-camÃ©ra (segmentation, projection et association 2D-3D) fournit ğ‘‘ par le
contrÃ´le et le module de confiance.
     Les expÃ©rimentations en scÃ©nario nominal montrent une bonne concordance entre les
estimations de lâ€™observateur local et le GPS pour (ğ‘¥, ğ‘¦, ğœ“, ğ‘£). Lâ€™observateur distribuÃ© permet Ã 
chaque vÃ©hicule de reconstruire lâ€™Ã©tat de lâ€™ensemble de la flotte avec des trajectoires et des
vitesses cohÃ©rentes. Le contrÃ´leur latÃ©ral ELC rÃ©duit le Â« corner-cutting Â» observÃ© en virage.
La fusion LiDAR-camÃ©ra gÃ©nÃ¨re des estimations fiables de d et v, confirmant lâ€™apport de la
perception multimodale pour les boucles de contrÃ´le et dâ€™estimation. Les rÃ©sultats obtenus
confirment la bonne robustesse du systÃ¨me face aux attaques sur la position, la distance inter-
vÃ©hiculaire restant stable dans tous les scÃ©narios. En revanche, les attaques sur la vitesse
provoquent une augmentation notable de lâ€™erreur de vitesse, dÃ©montrant une plus grande
sensibilitÃ© de cette variable aux falsifications. Ces observations valident la pertinence du cadre
de confiance intÃ©grÃ© Ã  lâ€™observateur distribuÃ© pour renforcer la rÃ©silience du systÃ¨me
coopÃ©ratif.




 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025        29
                                                          VEHASECU


5.4.25.3.2 PrÃ©paration aux essais en environnement rÃ©el
      Ces travaux ont permis de dÃ©velopper une carte Ã©lectronique embarquÃ©e dÃ©diÃ©e Ã 
lâ€™estimation avancÃ©e et Ã  la dÃ©tection des cyberattaques dans les vÃ©hicules autonomes et
connectÃ©s. Les principaux rÃ©sultats peuvent Ãªtre rÃ©sumÃ©s ainsi :
     â€¢ La carte Ã©lectronique conÃ§ue constitue une base matÃ©rielle robuste, dont la validation
        sera confirmÃ©e par les tests fonctionnels.
     â€¢ Le choix des composants et la dÃ©finition du stackup PCB ont permis dâ€™assurer une
        compatibilitÃ© Ã©lectromagnÃ©tique satisfaisante et une adaptation correcte des
        impÃ©dances pour les lignes de communication sans fil, malgrÃ© certains points
        dâ€™optimisation identifiÃ©s.
     â€¢ Le dÃ©veloppement a mis en Ã©vidence plusieurs axes dâ€™amÃ©lioration, notamment
        lâ€™optimisation du rÃ©seau dâ€™adaptation RF, la rÃ©duction des pertes liÃ©es aux vias,
        lâ€™amÃ©lioration du routage haute frÃ©quence et la gestion plus fine des alimentations.
     â€¢ Sur le plan logiciel, la programmation embarquÃ©e est encore limitÃ©e mais constitue une
        Ã©tape essentielle pour valider le bon fonctionnement du matÃ©riel et prÃ©parer un
        environnement adaptÃ© aux futures Ã©volutions.

      Ressources humaines
    Cf. documents Ã©conomiques

      Partenariat scientifique et recherche confiÃ©e
       Ce projet sâ€™inscrit pour partie dans une collaboration avec le Centre de Recherche en
Automatique de Nancy (CRAN) et bÃ©nÃ©ficie dâ€™une thÃ¨se CIFRE de NGUYEN Quang Huy. Le
laboratoire apporte son expertise dans les domaines de lâ€™Ã©lectronique et le dÃ©veloppement
dâ€™observateurs et contrÃ´leurs. Il met Ã  disposition aussi sa plateforme de test pour la validation
des modÃ¨les.




 Diffusion restreinte - Copyright Â© SEGULA Technologies - Tous droits rÃ©servÃ©s - 2025        30
